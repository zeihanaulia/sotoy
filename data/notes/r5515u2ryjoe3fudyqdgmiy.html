<h1 id="terraform">Terraform<a aria-hidden="true" class="anchor-heading icon-link" href="#terraform"></a></h1>
<h2 id="1-kenapa-lo-perlu-peduli-sama-infrastructure-as-code-iac"><strong>1. Kenapa Lo Perlu Peduli Sama Infrastructure as Code (IaC)?</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#1-kenapa-lo-perlu-peduli-sama-infrastructure-as-code-iac"></a></h2>
<hr>
<h3 id="2009-era-klik-klik-next-sampai-capek"><strong>2009: Era Klik-Klik Next Sampai Capek</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#2009-era-klik-klik-next-sampai-capek"></a></h3>
<p>Gue inget banget waktu jaman kuliah lagi belajar deploy website di warnet.
Lu mesti buka cPanel, klik "File Manager", upload <code>index.html</code>, terus klik "Extract".
Kalau ada database, buka "phpMyAdmin", create database manual, terus import file <code>.sql</code>.</p>
<p>Dan yang paling ngeselin:</p>
<blockquote>
<p>“Eh, kok di komputer dengan xampp bisa jalan, tapi di server malah error?”</p>
</blockquote>
<p>Tiap deploy ke production rasanya kayak lagi nge-gacha. Kadang sukses. Kadang... server-nya blank putih.</p>
<p>Kenapa? Karena semuanya <strong>manual dan gak tercatat</strong>. Nggak ada yang tau siapa yang ganti setting <code>php.ini</code>. Atau kenapa tiba-tiba <code>mod_rewrite</code> gak aktif. wkwkwkwk</p>
<hr>
<h3 id="2014-devops-naik-daun-tapi-kayak-dewa-yang-gak-boleh-sakit"><strong>2014: DevOps Naik Daun, Tapi Kayak Dewa yang Gak Boleh Sakit</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#2014-devops-naik-daun-tapi-kayak-dewa-yang-gak-boleh-sakit"></a></h3>
<p>Masuk era cloud. AWS makin populer. EC2 jadi temen semua orang.
Tapi setup-nya masih sama: lo SSH ke server, ketik:</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> nginx
<span class="token function">sudo</span> systemctl start nginx
</code></pre>
<p>Dan lo tulis semua itu... di Notes. Atau di Ms. Word yang gak pernah dibuka lagi.</p>
<p>Sampai suatu hari, lo udah gak ikut projectnya lagi, terus temen lo nanya:</p>
<blockquote>
<p>“Eh, lo dulu waktu deploy app X pake nginx atau apache ya?”</p>
</blockquote>
<p>Dan lo cuma bisa jawab:</p>
<blockquote>
<p>“Gue juga gak yakin, coba cek history bash aja.”</p>
</blockquote>
<hr>
<h3 id="20162017-ketemu-docker-tapi-belum-tahu-sebenernya-lo-butuh-dia"><strong>2016–2017: Ketemu Docker, Tapi Belum Tahu Sebenernya Lo Butuh Dia</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#20162017-ketemu-docker-tapi-belum-tahu-sebenernya-lo-butuh-dia"></a></h3>
<p>Di masa ini, lo mulai main Docker.
Awalnya karena penasaran: <em>“Ini apaan sih kok bisa jalanin app tanpa install macem-macem?”</em></p>
<p>Lo build image, <code>docker run</code>, terus amazed:</p>
<blockquote>
<p>“Buset, ini MySQL tinggal jalan gitu doang.”</p>
</blockquote>
<p>Tapi waktu itu lo masih mikir:</p>
<blockquote>
<p>“Docker ini kayak virtual machine versi mini ya?”
Padahal nggak gitu juga. Tapi gak apa-apa, semua orang pernah salah paham dulu.</p>
</blockquote>
<hr>
<h3 id="2018-baru-ansible-mulai-masuk-obrolan"><strong>2018: Baru Ansible Mulai Masuk Obrolan</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#2018-baru-ansible-mulai-masuk-obrolan"></a></h3>
<p>Mulai sering diskusi soal automation, provisioning, dan config.
Ada yang bilang:</p>
<blockquote>
<p>“Pakai Ansible dong, gak perlu SSH satu-satu.”</p>
</blockquote>
<p>Dan lo mulai coba.</p>
<p>Lo tulis playbook, lo SSH-in semua VM, dan berhasil. Tapi... lo ngerasa capek.</p>
<pre class="language-yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> install nginx
  <span class="token key atrule">apt</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx
    <span class="token key atrule">state</span><span class="token punctuation">:</span> present
</code></pre>
<p>Lo mikir, “Lah ini bedanya apa sama bash script yang dibungkus doang?”</p>
<p>Ansible jalan, tapi verbose.
Buat satu hal kecil, lo nulis satu file panjang.
Dan lo harus mikir urutan — <strong>prosedural banget</strong> cuy.</p>
<hr>
<h3 id="2020-infrastruktur-udah-jadi-makhluk-sendiri"><strong>2020: Infrastruktur Udah Jadi Makhluk Sendiri</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#2020-infrastruktur-udah-jadi-makhluk-sendiri"></a></h3>
<p>Satu project sekarang udah gak cukup pakai 1 server.
Minimal:</p>
<ul>
<li>1 buat app</li>
<li>1 buat database</li>
<li>1 buat monitoring</li>
<li>dan load balancer biar gak malu-maluin pas demo</li>
</ul>
<p>Belum lagi security group, subnet, IP publik, volume, DNS, TLS, sertifikat, user, IAM, cloudwatch, metric.</p>
<p>Lo sadar sekarang:</p>
<blockquote>
<p>"Kita gak bisa lagi jalanin semua ini pake tangan. Harus pake <strong>kode</strong>."</p>
</blockquote>
<hr>
<h3 id="datanglah-terraform-lo-nulis-kode-tapi-yang-jalanin-mesin"><strong>Datanglah Terraform: Lo Nulis Kode, Tapi yang Jalanin Mesin</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#datanglah-terraform-lo-nulis-kode-tapi-yang-jalanin-mesin"></a></h3>
<p>Terus lo ketemu Terraform.
Lo nulis kayak gini:</p>
<pre class="language-hcl"><code class="language-hcl"><span class="token keyword">resource <span class="token type variable">"aws_instance"</span></span> <span class="token string">"web"</span> <span class="token punctuation">{</span>
  <span class="token property">ami</span>           <span class="token punctuation">=</span> <span class="token string">"ami-abc123"</span>
  <span class="token property">instance_type</span> <span class="token punctuation">=</span> <span class="token string">"t2.micro"</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Dan... <strong>BOOM!</strong>
Servernya muncul. Otomatis. Konsisten. Bisa diulang. Bisa dibalikin ke kondisi awal.</p>
<p>Lo bisa <code>terraform plan</code> buat liat perubahan
Lo bisa <code>terraform apply</code> buat beneran ngerubah
Dan kalau lo nyesel: <code>terraform destroy</code> aja. Kayak hubungan yang salah dari awal.</p>
<hr>
<h3 id="hari-ini-infrastruktur-lo-gak-boleh-jadi-mitos"><strong>Hari Ini: Infrastruktur Lo Gak Boleh Jadi Mitos</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#hari-ini-infrastruktur-lo-gak-boleh-jadi-mitos"></a></h3>
<p>Tim lo makin banyak.
Lo kerja bareng orang lain.
Kalau semua setup masih ada di kepala lo, berarti lo bottleneck.
Kalau lo disuruh liburan dan takut production error, berarti sistem lo belum bener.</p>
<p>Dengan Infrastructure as Code:</p>
<ul>
<li>Semua bisa direview kayak kode biasa</li>
<li>Bisa ditest, dikontrol via CI/CD</li>
<li>Bisa direstore kalau ada yang kacau</li>
<li>Dan yang paling penting: <strong>gak bikin lo jadi single point of failure</strong></li>
</ul>
<hr>
<h2 id="apa-itu-terraform-dan-kenapa-banyak-yang-milih-ini"><strong>Apa Itu Terraform dan Kenapa Banyak yang Milih Ini?</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#apa-itu-terraform-dan-kenapa-banyak-yang-milih-ini"></a></h2>
<p>Jadi gini...</p>
<p>Bayangin lo lagi kerja di startup baru. Lo baru deploy 3 VM manual di AWS buat staging.
Terus besoknya, disuruh deploy hal yang sama buat production.
Besoknya lagi, buat environment testing.
Dan lo mulai sadar:</p>
<blockquote>
<p><em>“Eh, kok gue ngulang-ngulang ya? Ini kerjaan manusia atau robot sih?”</em></p>
</blockquote>
<p>Nah, di sinilah muncul ide gila:
<strong>Kenapa gak lo tulis aja infrastrukturnya kayak lo nulis kode?</strong>
Gak perlu klik-klik, gak perlu ngetik <code>ssh</code>, cukup <code>terraform apply</code>, dan <em>boom!</em>
Semua VM, database, security group, VPC, sampai DNS record langsung jadi.</p>
<p>Dari sini udah bisa dibayangin berapa banyak waktu "klak-klik" manual cuma bikin VM / hal yang sama.
Lu cuma perlu "copas" dan ganti beberapa variable, udah. jadi dalam hitungan menit. gokil sih.</p>
<hr>
<h3 id="apa-itu-terraform-dan-kenapa-banyak-yang-milih-ini-1"><strong>Apa Itu Terraform dan Kenapa Banyak yang Milih Ini?</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#apa-itu-terraform-dan-kenapa-banyak-yang-milih-ini-1"></a></h3>
<p>Sebelumnya gue udah cerita, sekitar tahun 2018 gue mulai kenal sama Ansible.
Tapi, waktu itu bukan cuma Ansible doang yang rame di skena.
Ada juga nama-nama kayak <strong>Chef</strong>, <strong>Puppet</strong>, bahkan <strong>SaltStack</strong> yang ikut nongol di skena DevOps.</p>
<p>Semua menawarkan janji yang kurang lebih sama:</p>
<blockquote>
<p>“Biar lo gak perlu lagi setup server satu-satu pake SSH.”</p>
</blockquote>
<p>Gue inget banget, waktu itu rasanya kayak ada lomba—siapa yang paling gampang bikin 10 server langsung jalan dan auto install semua service.</p>
<p>Tapi ternyata, itu semua belum cukup.</p>
<p>Soalnya makin lama gue utak-atik, makin sadar:
<strong>"Ini baru setup di dalem server, tapi bikin infrastrukturnya sendiri masih ribet, bro."</strong></p>
<p>Lo tetep harus klik-klik bikin VM, bikin VPC, bikin load balancer…
Dan ini bikin gue mikir:</p>
<blockquote>
<p>“Kalau ngatur aplikasi aja udah bisa pake kode, masa bikin infrastrukturnya gak bisa?”</p>
</blockquote>
<p>Dan akhirnya, gue ketemu sama si satu ini:
<strong>Terraform.</strong></p>
<hr>
<h4 id="terus-apa-bedanya-sama-ansible-chef-atau-puppet"><strong>Terus, Apa Bedanya Sama Ansible, Chef, atau Puppet?</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#terus-apa-bedanya-sama-ansible-chef-atau-puppet"></a></h4>
<p>Bedanya bukan cuma di syntax atau nama variabel.
Bedanya ada di <em>cara lo mikir</em>.</p>
<p>Tools kayak <strong>Ansible</strong> itu ngajarin lo mikir prosedural.
Lo bilang ke server:</p>
<pre class="language-yaml"><code class="language-yaml"><span class="token punctuation">-</span> install nginx
<span class="token punctuation">-</span> copy config
<span class="token punctuation">-</span> start service
</code></pre>
<p>Lo kayak lagi masak di dapur, satu langkah demi langkah. Salah di salah satu langkah, masakan bisa jadi beda rasanya.</p>
<p>Sementara <strong>Terraform</strong> itu mikirnya kayak arsitek:
Lo bilang apa yang lo pengen, dan dia yang urus detailnya.</p>
<blockquote>
<p><em>"Gue mau 3 VM di AWS region Singapore, instance-nya t3.micro, udah ada tag-nya 'env=staging'."</em></p>
</blockquote>
<p>Udah. Gak perlu kasih tau cara login ke AWS Console, klik tombol mana, urutannya gimana.
Dia bakal bandingin kondisi sekarang (state) sama keinginan lo (desired state), dan langsung bikin plan buat nyamain keduanya.</p>
<p>Ini yang disebut pendekatan <strong>declarative</strong>, dan ini bikin beda banget rasanya.</p>
<hr>
<h3 id="kenapa-banyak-yang-suka-terraform"><strong>Kenapa Banyak yang Suka Terraform?</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#kenapa-banyak-yang-suka-terraform"></a></h3>
<h4 id="1-deklaratif-dan-predictable">1. <strong>Deklaratif dan Predictable</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#1-deklaratif-dan-predictable"></a></h4>
<p>Jadi Lo bilang mau 3 VM, dia kasih 3 VM. Lo ganti jadi 5, dia tambahin 2.
Dia juga ngasih tau sebelum jalan:</p>
<pre class="language-bash"><code class="language-bash">+ create aws_instance.web<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
~ update aws_instance.web<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
- destroy aws_instance.old
</code></pre>
<p>Jadi gak ada kejutan-kejutan konyol.</p>
<hr>
<h4 id="2-cloud-agnostic-tapi-tetep-spesifik">2. <strong>Cloud Agnostic, Tapi Tetep Spesifik</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#2-cloud-agnostic-tapi-tetep-spesifik"></a></h4>
<p>Lo bisa pakai Terraform buat deploy ke:</p>
<ul>
<li>AWS</li>
<li>Azure</li>
<li>Google Cloud</li>
<li>bahkan DigitalOcean, Oracle, dan on-prem</li>
</ul>
<p>Tapi tetep bisa manfaatin fitur khas tiap cloud. Misal lo pengen pake <strong>S3 bucket lifecycle</strong>, tinggal tulis di config-nya — gak harus nyamain semua cloud biar setara.</p>
<hr>
<h4 id="3-bisa-disimpan-di-git-dan-di-review-kayak-kode">3. <strong>Bisa Disimpan di Git dan Di-review Kayak Kode</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#3-bisa-disimpan-di-git-dan-di-review-kayak-kode"></a></h4>
<p>Karena semua infrastruktur lo ditulis pake <code>.tf</code>, lo bisa commit ke Git, review pake PR, kasih komentar, dan track history-nya.</p>
<p>Lo bakal bisa bilang:</p>
<blockquote>
<p>“Siapa yang hapus VPC minggu lalu?!”
dan tinggal buka Git log.</p>
</blockquote>
<hr>
<h4 id="4-integrasi-sama-cicd-dan-workflow-modern">4. <strong>Integrasi Sama CI/CD dan Workflow Modern</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#4-integrasi-sama-cicd-dan-workflow-modern"></a></h4>
<ul>
<li>Lo bisa pasang <code>terraform plan</code> di GitHub Actions tiap ada PR.</li>
<li>Lo bisa linting, formatting, sampai state backend di S3.</li>
<li>Lo bisa kolaborasi via Terraform Cloud atau workspace manual.</li>
</ul>
<p>Intinya: bisa masuk ke pipeline modern, tanpa harus ngotak-ngatik GUI cloud provider.</p>
<h2 id="proses-kerja-terraform"><strong>Proses Kerja Terraform</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#proses-kerja-terraform"></a></h2>
<p>Pertama kali gue pakai Terraform, gue sempet mikir,</p>
<blockquote>
<p>“Ini tool bisa bikin infrastruktur secara otomatis, jangan-jangan kayak magic ya?”</p>
</blockquote>
<p>Ternyata bukan. Bukan sulap. Bukan sihir.
Tapi logika dan <em>state management</em> yang rapi dan disiplin banget.</p>
<p>Gue bakal ceritain alurnya step-by-step, biar lo ngerti cara kerjanya dari awal sampe akhir.</p>
<hr>
<h3 id="1-lo-tulis-kebutuhan-lo-hcl---hashicorp-configuration-language"><strong>1. Lo Tulis Kebutuhan Lo (HCL - HashiCorp Configuration Language)</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#1-lo-tulis-kebutuhan-lo-hcl---hashicorp-configuration-language"></a></h3>
<p>Yang pertama lo lakuin: lo bikin file <code>.tf</code>.</p>
<p>Misalnya lo pengen jalanin container Docker pake image <code>nginx</code>, lo bisa tulis kayak gini:</p>
<pre class="language-hcl"><code class="language-hcl"><span class="token keyword">resource <span class="token type variable">"docker_container"</span></span> <span class="token string">"nginx"</span> <span class="token punctuation">{</span>
  <span class="token property">name</span>  <span class="token punctuation">=</span> <span class="token string">"tutorial"</span>
  <span class="token property">image</span> <span class="token punctuation">=</span> docker_image.nginx.image_id

  <span class="token keyword">ports</span> <span class="token punctuation">{</span>
    <span class="token property">internal</span> <span class="token punctuation">=</span> <span class="token number">80</span>
    <span class="token property">external</span> <span class="token punctuation">=</span> <span class="token number">8000</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Lo gak nyuruh dia “install Docker dulu”, atau “buka port 80 manual”.
Lo tinggal deklarasi: gue mau container <code>nginx</code> jalan, expose port sekian.</p>
<p>Ini kayak lo bilang ke arsitek:</p>
<blockquote>
<p>“Gue mau rumah 2 lantai, kamar 3, kamar mandi 2, dan ada dapur outdoor.”</p>
</blockquote>
<p>Bukan:</p>
<blockquote>
<p>“Pertama gali tanah, lalu cor pondasi, lalu pasang bata...”</p>
</blockquote>
<hr>
<h3 id="2-terraform-init--kenalin-dulu-dunia-lo"><strong>2. Terraform Init – Kenalin Dulu Dunia Lo</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#2-terraform-init--kenalin-dulu-dunia-lo"></a></h3>
<p>Begitu file lo selesai, langkah pertama:</p>
<pre class="language-bash"><code class="language-bash">terraform init
</code></pre>
<p>Ini penting karena Terraform butuh download plugin buat provider yang lo pakai.
Provider itu kayak jembatan antara Terraform dan platform yang lo kelola—bisa AWS, GCP, Docker, Azure, dan lain-lain.</p>
<p>Misalnya kalau lo deploy ke Docker, dia akan download plugin <code>kreuzwerker/docker</code>.
Kalau ke AWS, dia ambil plugin <code>hashicorp/aws</code>.</p>
<p>Tanpa ini, lo cuma punya file <code>.tf</code> doang yang gak tau nyambung ke mana.</p>
<hr>
<h3 id="3-terraform-plan--simulasi-tanpa-komitmen"><strong>3. Terraform Plan – Simulasi Tanpa Komitmen</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#3-terraform-plan--simulasi-tanpa-komitmen"></a></h3>
<p>Lanjut ke tahap paling menarik:</p>
<pre class="language-bash"><code class="language-bash">terraform plan
</code></pre>
<p>Nah ini dia kekuatan utama Terraform: <strong>rencana.</strong></p>
<p>Di sini lo bakal lihat:</p>
<ul>
<li>Apa yang bakal dibuat?</li>
<li>Apa yang bakal dihapus?</li>
<li>Apa yang bakal diubah?</li>
</ul>
<p>Misalnya dia bilang:</p>
<pre class="language-text"><code class="language-text">+ create docker_container.nginx
</code></pre>
<p>Artinya, dia bakal bikin container baru.</p>
<p>Tapi dia belum bener-bener bikin.
Ini cuma <em>preview</em>.
Kayak lo liat maket rumah dulu sebelum mulai bangun.</p>
<p>Dan bagian paling krusial?
<strong>State file</strong> – <code>terraform.tfstate</code>.</p>
<p>Ini file penting banget.
Isinya catatan lengkap:</p>
<blockquote>
<p>“Sekarang gue udah bikin resource ini, id-nya segini, status-nya gini.”</p>
</blockquote>
<p>Jadi tiap kali lo <code>plan</code>, Terraform bakal bandingin:
<strong>current state (di tfstate)</strong> vs <strong>desired state (di .tf)</strong>.</p>
<hr>
<h3 id="4-terraform-apply--waktunya-eksekusi"><strong>4. Terraform Apply – Waktunya Eksekusi</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#4-terraform-apply--waktunya-eksekusi"></a></h3>
<p>Kalau lo udah yakin sama hasil <code>plan</code>, lo tinggal jalanin:</p>
<pre class="language-bash"><code class="language-bash">terraform apply
</code></pre>
<p>Di sini dia bakal mulai ngebangun beneran.</p>
<p>Semua deklarasi lo di file <code>.tf</code> bakal diwujudkan jadi resource nyata:</p>
<ul>
<li>Docker container jalan</li>
<li>EC2 instance muncul</li>
<li>Load balancer aktif</li>
<li>S3 bucket kepasang</li>
</ul>
<p>Dan semuanya dicatat lagi ke dalam <code>terraform.tfstate</code>.</p>
<p>Jadi, kalau lo jalanin <code>apply</code> dua kali, dia gak bakal bikin dua kali.
Dia bakal bilang:</p>
<blockquote>
<p>“Semua udah sesuai, gak perlu diapa-apain.”</p>
</blockquote>
<p>Idempotent, cuy. Konsisten.</p>
<hr>
<h3 id="5-terraform-destroy--kalau-lo-mau-ngebongkar-semuanya"><strong>5. Terraform Destroy – Kalau Lo Mau Ngebongkar Semuanya</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#5-terraform-destroy--kalau-lo-mau-ngebongkar-semuanya"></a></h3>
<p>Punya iseng dan pengen bersihin semuanya?</p>
<pre class="language-bash"><code class="language-bash">terraform destroy
</code></pre>
<p>Terraform bakal baca file <code>tfstate</code> dan ngehapus semua resource yang dia bikin sebelumnya.
Ya, <strong>cuma yang dia bikin</strong>, yang lain kagak dia sentuh.</p>
<p>Ini bikin dia aman dan terkontrol.
Gak ada tuh cerita “asal delete” kayak lo tekan tombol terminate di AWS Console.</p>
<hr>
<h3 id="bonus-state-bisa-disimpan-di-cloud"><strong>Bonus: State Bisa Disimpan di Cloud</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#bonus-state-bisa-disimpan-di-cloud"></a></h3>
<p>Kalau kerja sendirian, simpan <code>terraform.tfstate</code> lokal oke-oke aja.
Tapi kalau tim lo banyak? Lo harus simpan di <strong>remote backend</strong> kayak:</p>
<ul>
<li>S3 + DynamoDB (buat locking)</li>
<li>Terraform Cloud</li>
<li>Azure Blob</li>
<li>GCS</li>
</ul>
<p>Kenapa?
Karena:</p>
<ol>
<li>Lo butuh <strong>locking</strong> biar gak dua orang edit infrastruktur barengan.</li>
<li>Lo butuh <strong>backup</strong> biar tfstate gak ilang.</li>
<li>Lo butuh <strong>visibility</strong>, siapa ngapain kapan.</li>
</ol>
<h2 id="gandeng-temen-packer-docker-ansible-kubernetes"><strong>Gandeng Temen: Packer, Docker, Ansible, Kubernetes</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#gandeng-temen-packer-docker-ansible-kubernetes"></a></h2>
<p><em>(Alias: Terraform Gak Berdiri Sendiri, Bro)</em></p>
<p>Jadi gini…
Terraform itu keren, tapi dia gak bisa mmelakukan semuanya sendiri.
Dia perlu temen. Dan temen-temennya ini—Packer, Docker, Ansible, Kubernetes—punya peran masing-masing.</p>
<hr>
<h3 id="1-packer--si-tukang-cetak-image-builder"><strong>1. Packer – Si Tukang Cetak (Image Builder)</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#1-packer--si-tukang-cetak-image-builder"></a></h3>
<p>Bayangin lo mau deploy 100 VM identik.
Kalau setiap kali setup lo harus install package satu-satu, masukin config manual, ya kelar hidup lo.</p>
<p>Nah, Packer datang sebagai penyelamat.
Dengan Packer, lo bisa bikin <strong>template image</strong> (bisa AMI di AWS, bisa Docker image, bisa VHD di Azure) yang udah siap pakai.</p>
<p>Contoh:
Lo tulis satu file <code>.json</code> atau <code>.hcl</code> buat bilang:</p>
<pre class="language-hcl"><code class="language-hcl">- Base image: Ubuntu
- Install nginx
- Copy konfigurasi lo
- Buat snapshot image-nya
</code></pre>
<p>Jadinya?
Satu VM image yang tinggal <strong>plug and play</strong>.
Gak perlu setup dari nol tiap kali launch.</p>
<p>Biasanya workflow-nya begini:</p>
<ol>
<li>Lo build image pakai Packer</li>
<li>Hasilnya dipakai sama Terraform buat deploy server</li>
<li>Server langsung siap tempur dari detik pertama</li>
</ol>
<hr>
<h3 id="2-docker--bikin-aplikasi-lo-portabel"><strong>2. Docker – Bikin Aplikasi Lo Portabel</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#2-docker--bikin-aplikasi-lo-portabel"></a></h3>
<p>Docker itu kayak bento box buat aplikasi.
Semua udah dikemas rapi di satu tempat:</p>
<ul>
<li>Code-nya</li>
<li>Dependency-nya</li>
<li>Runtime-nya</li>
</ul>
<p>Dan yang paling gila:
Lo bisa build image-nya di laptop, terus jalanin di VM production tanpa drama "eh dependency-nya beda ya".</p>
<p>Makanya Docker dan Terraform itu cocok banget.
Dengan provider <code>kreuzwerker/docker</code>, lo bisa:</p>
<pre class="language-hcl"><code class="language-hcl"><span class="token keyword">resource <span class="token type variable">"docker_container"</span></span> <span class="token string">"nginx"</span> <span class="token punctuation">{</span>
  <span class="token property">image</span> <span class="token punctuation">=</span> <span class="token string">"nginx"</span>
  <span class="token keyword">ports</span> <span class="token punctuation">{</span>
    <span class="token property">internal</span> <span class="token punctuation">=</span> <span class="token number">80</span>
    <span class="token property">external</span> <span class="token punctuation">=</span> <span class="token number">8080</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Udah, lo punya container jalan lewat Terraform.
Gak perlu masukin command <code>docker run</code> satu-satu.</p>
<hr>
<h3 id="3-ansible--si-tukang-rapiin-configuration-management"><strong>3. Ansible – Si Tukang Rapiin (Configuration Management)</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#3-ansible--si-tukang-rapiin-configuration-management"></a></h3>
<p>Lo udah punya server (misal via Terraform), tapi mau ngatur dalamnya:</p>
<ul>
<li>Install Python</li>
<li>Setup cron job</li>
<li>Pasang cert SSL</li>
</ul>
<p>Disinilah Ansible masuk.</p>
<p>Dia tool configuration management berbasis YAML.
Bedanya sama Terraform?
Terraform ngurus <em>apa yang harus ada</em>,
Ansible ngurus <em>gimana caranya</em> ngerjain itu.</p>
<p>Dan yang asik, keduanya bisa kerjasama.</p>
<p>Contoh:</p>
<ul>
<li>Terraform deploy 5 VM, kasih tag <code>role=web</code></li>
<li>Ansible scan semua VM yang punya tag itu</li>
<li>Ansible setup nginx di dalamnya</li>
</ul>
<p>Efisien. Clean. Automation yang terstruktur.</p>
<hr>
<h3 id="4-kubernetes--si-jenderal-pasukan-container"><strong>4. Kubernetes – Si Jenderal Pasukan Container</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#4-kubernetes--si-jenderal-pasukan-container"></a></h3>
<p>Kalau lo udah jalanin banyak Docker container, lo bakal ngerasain keribetan:</p>
<ul>
<li>Gimana kalau 1 container mati?</li>
<li>Gimana cara auto scaling?</li>
<li>Gimana rolling update?</li>
<li>Gimana load balancing?</li>
</ul>
<p>Nah, Kubernetes adalah jawabannya.</p>
<p>Tapi Kubernetes <strong>kompleks</strong>.
Lo gak deploy 1–2 command. Lo bikin cluster.
Lo butuh worker node, control plane, networking internal, volume, service discovery, dll.</p>
<p>Makanya best practice-nya:</p>
<ol>
<li>Lo bikin <strong>VM image khusus</strong> pake Packer (udah ada Docker dan agent Kubernetes)</li>
<li>Deploy semua node pakai Terraform</li>
<li>Otomatis semua nyambung dan bikin cluster</li>
</ol>
<p>Jadi kombinasi lengkapnya:</p>
<ul>
<li>Packer: bikin image</li>
<li>Terraform: deploy VM dan cluster</li>
<li>Kubernetes: orkestrasi container</li>
<li>Docker: format aplikasinya</li>
<li>Ansible: kalo masih mau pegang low-level config</li>
</ul>
<h2 id="setup-terraform-dan-deploy-ke-docker-error-pertama-pahami-akar-masalahnya"><strong>Setup Terraform dan Deploy ke Docker: Error Pertama, Pahami Akar Masalahnya</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#setup-terraform-dan-deploy-ke-docker-error-pertama-pahami-akar-masalahnya"></a></h2>
<p>Waktu pertama kali nyobain Terraform, gue langsung tertarik buat nyambungin ke Docker.
Alasannya simpel:</p>
<ul>
<li>Gampang dites lokal</li>
<li>Gak butuh akun cloud</li>
<li>Bisa cepet lihat hasilnya</li>
</ul>
<p>Gue ambil contoh paling basic dari dokumentasi:</p>
<pre class="language-hcl"><code class="language-hcl"><span class="token keyword">terraform</span> <span class="token punctuation">{</span>
  <span class="token keyword">required_providers</span> <span class="token punctuation">{</span>
    <span class="token property">docker</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span>
      <span class="token property">source</span>  <span class="token punctuation">=</span> <span class="token string">"kreuzwerker/docker"</span>
      <span class="token property">version</span> <span class="token punctuation">=</span> <span class="token string">"~> 3.0.1"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">provider<span class="token type variable"> "docker" </span></span><span class="token punctuation">{</span>
  <span class="token property">host</span> <span class="token punctuation">=</span> <span class="token string">"npipe:////.//pipe//docker_engine"</span>
<span class="token punctuation">}</span>

<span class="token keyword">resource <span class="token type variable">"docker_image"</span></span> <span class="token string">"nginx"</span> <span class="token punctuation">{</span>
  <span class="token property">name</span>         <span class="token punctuation">=</span> <span class="token string">"nginx"</span>
  <span class="token property">keep_locally</span> <span class="token punctuation">=</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>

<span class="token keyword">resource <span class="token type variable">"docker_container"</span></span> <span class="token string">"nginx"</span> <span class="token punctuation">{</span>
  <span class="token property">image</span> <span class="token punctuation">=</span> docker_image.nginx.image_id
  <span class="token property">name</span>  <span class="token punctuation">=</span> <span class="token string">"tutorial"</span>

  <span class="token keyword">ports</span> <span class="token punctuation">{</span>
    <span class="token property">internal</span> <span class="token punctuation">=</span> <span class="token number">80</span>
    <span class="token property">external</span> <span class="token punctuation">=</span> <span class="token number">8000</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Gue save file itu sebagai <code>main.tf</code>, lalu di terminal:</p>
<pre class="language-bash"><code class="language-bash">terraform init
terraform apply
</code></pre>
<p>Terus… <strong>boom! Error.</strong></p>
<hr>
<h3 id="wsl-dan-docker-gak-semulus-itu-ferguso"><strong>WSL dan Docker: Gak Semulus Itu, Ferguso</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#wsl-dan-docker-gak-semulus-itu-ferguso"></a></h3>
<p>Ternyata bagian ini:</p>
<pre class="language-hcl"><code class="language-hcl"><span class="token property">host</span> <span class="token punctuation">=</span> <span class="token string">"npipe:////.//pipe//docker_engine"</span>
</code></pre>
<p>Itu <strong>khusus buat Windows native</strong>, bukan WSL.
Di WSL, host Docker-nya beda: biasanya lo connect ke Docker via socket di <code>/var/run/docker.sock</code>.</p>
<p>Akhirnya gue ubah jadi:</p>
<pre class="language-hcl"><code class="language-hcl"><span class="token keyword">provider<span class="token type variable"> "docker" </span></span><span class="token punctuation">{</span>
  <span class="token property">host</span> <span class="token punctuation">=</span> <span class="token string">"unix:///var/run/docker.sock"</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Tapi di sinilah muncul masalah baru:</p>
<pre class="language-bash"><code class="language-bash">Error: unable to connect to Docker daemon
</code></pre>
<p>Padahal gue bisa <code>docker ps</code> di terminal WSL. Kok Terraform gak bisa connect?</p>
<hr>
<h3 id="root-cause-nya-permission-dan-env-variable"><strong>Root Cause-nya? Permission dan Env Variable</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#root-cause-nya-permission-dan-env-variable"></a></h3>
<p>Gue coba debug:</p>
<pre class="language-bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token variable">$DOCKER_HOST</span>
</code></pre>
<p>Ternyata kosong.
Docker CLI bisa jalan karena dia nyambung ke socket default, tapi Terraform butuh host yang eksplisit. Jadi lo harus set <code>DOCKER_HOST</code> environment variable, atau masukin langsung ke config Terraform.</p>
<p>Tapi belum selesai sampai situ.</p>
<p>Kadang juga muncul error permission:</p>
<pre><code>permission denied while trying to connect to the Docker daemon socket
</code></pre>
<p>Solusinya:</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">usermod</span> -aG <span class="token function">docker</span> <span class="token environment constant">$USER</span>
</code></pre>
<p>Lalu restart WSL, atau:</p>
<pre class="language-bash"><code class="language-bash">newgrp <span class="token function">docker</span>
</code></pre>
<hr>
<h3 id="akhirnya-jalan"><strong>Akhirnya Jalan</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#akhirnya-jalan"></a></h3>
<p>Setelah ngoprek dikit, akhirnya:</p>
<pre class="language-hcl"><code class="language-hcl"><span class="token keyword">provider<span class="token type variable"> "docker" </span></span><span class="token punctuation">{</span>
  <span class="token property">host</span> <span class="token punctuation">=</span> <span class="token string">"unix:///var/run/docker.sock"</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Dan semua command Terraform bisa jalan normal:</p>
<pre class="language-bash"><code class="language-bash">terraform init
terraform apply
</code></pre>
<p>Container NGINX langsung jalan di port 8000.
Cek pakai browser:</p>
<pre><code>http://localhost:8000
</code></pre>
<p>Muncul welcome page-nya NGINX. Akhirnya berhasil!</p>
<hr>