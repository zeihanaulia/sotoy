{"pageProps":{"note":{"id":"0tk30dy71tpxnt8p8lxiiwb","title":"Terraform on M1","desc":"Panduan singkat mengatasi masalah provider Terraform yang belum mendukung arsitektur Apple Silicon (M1/arm64) di macOS, serta solusi menggunakan m1-terraform-provider-helper untuk build dan install provider secara lokal.","updated":1749900629661,"created":1749900138937,"tags":["terraform","apple-silicon","m1","devops","troubleshooting","provider","arm64","macos"],"custom":{},"fname":"til.devops.troubleshots.terraform-on-m1","type":"note","vault":{"fsPath":"vault"},"contentHash":"208fb38a6678b390fcc6db9e43347d2b","links":[{"type":"frontmatterTag","from":{"fname":"til.devops.troubleshots.terraform-on-m1","id":"0tk30dy71tpxnt8p8lxiiwb","vaultName":"vault"},"value":"tags.terraform","alias":"terraform","xvault":false,"to":{"fname":"tags.terraform"}},{"type":"frontmatterTag","from":{"fname":"til.devops.troubleshots.terraform-on-m1","id":"0tk30dy71tpxnt8p8lxiiwb","vaultName":"vault"},"value":"tags.apple-silicon","alias":"apple-silicon","xvault":false,"to":{"fname":"tags.apple-silicon"}},{"type":"frontmatterTag","from":{"fname":"til.devops.troubleshots.terraform-on-m1","id":"0tk30dy71tpxnt8p8lxiiwb","vaultName":"vault"},"value":"tags.m1","alias":"m1","xvault":false,"to":{"fname":"tags.m1"}},{"type":"frontmatterTag","from":{"fname":"til.devops.troubleshots.terraform-on-m1","id":"0tk30dy71tpxnt8p8lxiiwb","vaultName":"vault"},"value":"tags.devops","alias":"devops","xvault":false,"to":{"fname":"tags.devops"}},{"type":"frontmatterTag","from":{"fname":"til.devops.troubleshots.terraform-on-m1","id":"0tk30dy71tpxnt8p8lxiiwb","vaultName":"vault"},"value":"tags.troubleshooting","alias":"troubleshooting","xvault":false,"to":{"fname":"tags.troubleshooting"}},{"type":"frontmatterTag","from":{"fname":"til.devops.troubleshots.terraform-on-m1","id":"0tk30dy71tpxnt8p8lxiiwb","vaultName":"vault"},"value":"tags.provider","alias":"provider","xvault":false,"to":{"fname":"tags.provider"}},{"type":"frontmatterTag","from":{"fname":"til.devops.troubleshots.terraform-on-m1","id":"0tk30dy71tpxnt8p8lxiiwb","vaultName":"vault"},"value":"tags.arm64","alias":"arm64","xvault":false,"to":{"fname":"tags.arm64"}},{"type":"frontmatterTag","from":{"fname":"til.devops.troubleshots.terraform-on-m1","id":"0tk30dy71tpxnt8p8lxiiwb","vaultName":"vault"},"value":"tags.macos","alias":"macos","xvault":false,"to":{"fname":"tags.macos"}}],"anchors":{"referensi":{"type":"header","text":"Referensi","value":"referensi","line":40,"column":0,"depth":2}},"children":[],"parent":"nduo5g1yzk1s1fgijagbt64","data":{}},"body":"<h1 id=\"terraform-on-m1\">Terraform on M1<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#terraform-on-m1\"></a></h1>\n<p>Gembel banget, entah kenapa terraform di M1 ada issue nyebelin.</p>\n<pre class=\"language-sh\"><code class=\"language-sh\">â”‚ Error: Incompatible provider version\nâ”‚ \nâ”‚ Provider registry.terraform.io/hashicorp/template v2.2.0 does not have a package available for your current platform,\nâ”‚ darwin_arm64.\nâ”‚ \nâ”‚ Provider releases are separate from Terraform CLI releases, so not all providers are available for all platforms. Other versions\nâ”‚ of this provider may have different platforms supported.\n</code></pre>\n<p>bisa bisanya, di M1 gak ada dan gak update. Perlu ada workaround buat benerin ginian.</p>\n<pre class=\"language-sh\"><code class=\"language-sh\">brew install kreuzwerker/taps/m1-terraform-provider-helper\nm1-terraform-provider-helper activate\nm1-terraform-provider-helper install hashicorp/template -v \n</code></pre>\n<h2 id=\"referensi\">Referensi<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#referensi\"></a></h2>\n<p>Lengkapnya disini sih, <a href=\"https://github.com/kreuzwerker/m1-terraform-provider-helper\">https://github.com/kreuzwerker/m1-terraform-provider-helper</a></p>\n<p>Gue ceritain dikit kali ya soal gimana cara kerja project <code>m1-terraform-provider-helper</code> ini.</p>\n<p>Jadi gini, lo abis install Terraform, pengen pake provider tertentu â€” misalnya <code>vault</code> atau <code>azurerm</code> â€” tapi begitu lo jalanin <code>terraform init</code>, malah error karena gak nemu provider buat darwin_arm64. Masalahnya, banyak provider di registry Terraform itu cuma sediain binary buat x86_64, alias amd64. Nah, di M1, itu gak langsung bisa dipake, dan Terraform juga strict banget soal checksum. Gak bisa asal compile lokal doang, karena lockfile-nya bakal nolak kalau checksum-nya beda.</p>\n<p>Di situ lah <code>m1-terraform-provider-helper</code> masuk. Dia basically ngebantuin lo untuk compile provider-provider itu dari source code langsung di mesin lo, tapi gak cuma berhenti di compile doang. Dia juga nanganin semua penempatan binary-nya di path yang Terraform expect, dan bahkan bisa bantu lo update <code>.terraform.lock.hcl</code> biar checksum dari binary lokal tadi dianggap valid sama Terraform.</p>\n<p>Cara pakenya pun cukup simpel. Pertama lo aktifin dulu si helper-nya lewat <code>m1-terraform-provider-helper activate</code>. Ini bakal nge-setup environment lo biar Terraform ngarah ke folder plugin lokal yang dipake si helper. Abis itu lo tinggal install providernya, misalnya <code>m1-terraform-provider-helper install hashicorp/vault -v v2.10.0</code>. Di balik layar, dia bakal clone repo GitHub providernya, nge-run build (biasanya <code>make build</code>), dan nyimpen hasilnya ke direktori plugin Terraform dengan struktur folder yang valid sesuai versi Terraform lo.</p>\n<p>Satu langkah lagi yang penting, lo harus update lockfile-nya. Karena provider lokal yang lo compile tadi punya checksum yang beda, lo bisa jalanin <code>m1-terraform-provider-helper lockfile upgrade</code> supaya <code>.terraform.lock.hcl</code> lo ditambahin checksum dari binary baru tadi. Kalau enggak, Terraform bakal tetap error pas lo <code>init</code> atau <code>apply</code>.</p>\n<p>Dan udah, gitu doang. Lo sekarang bisa jalanin Terraform kaya biasa, tapi semua provider yang tadinya gak support M1 sekarang udah bisa dipake tanpa error checksum atau masalah arsitektur. Tool ini tuh fungsional banget kalau lo kerja banyak dengan Terraform di Mac M1 dan capek debug karena provider gak support.</p>\n<p>Kalau lo butuh compile custom atau provider dari repo yang gak standar, dia juga sediain flag buat override build command atau source URL. Tapi buat sebagian besar kasus, command default-nya udah cukup.</p>\n<p>Singkatnya, ini tool yang ngisi celah antara Apple Silicon dan ekosistem Terraform yang belum 100% native ARM. Gak perlu hack aneh-aneh atau tunggu provider dirilis resmi, tinggal compile lokal dan jalan.</p>\n<hr>\n<h2 id=\"tags\">Tags<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#tags\"></a></h2>\n<ol>\n<li><a title=\"Private\" href=\"https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html\" target=\"_blank\" class=\"private\">terraform (Private)</a></li>\n<li><a title=\"Private\" href=\"https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html\" target=\"_blank\" class=\"private\">apple-silicon (Private)</a></li>\n<li><a title=\"Private\" href=\"https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html\" target=\"_blank\" class=\"private\">m1 (Private)</a></li>\n<li><a title=\"Private\" href=\"https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html\" target=\"_blank\" class=\"private\">devops (Private)</a></li>\n<li><a title=\"Private\" href=\"https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html\" target=\"_blank\" class=\"private\">troubleshooting (Private)</a></li>\n<li><a title=\"Private\" href=\"https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html\" target=\"_blank\" class=\"private\">provider (Private)</a></li>\n<li><a title=\"Private\" href=\"https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html\" target=\"_blank\" class=\"private\">arm64 (Private)</a></li>\n<li><a title=\"Private\" href=\"https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html\" target=\"_blank\" class=\"private\">macos (Private)</a></li>\n</ol>","noteIndex":{"id":"oqxmejlafk9x8rj9t5hya5z","title":"Hello and Welcome! ðŸ‘‹","desc":"","updated":1742030256619,"created":1646842475821,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"f7db9d96297496e598d70248ef16b81f","links":[],"anchors":{"find-more":{"type":"header","text":"Find More","value":"find-more","line":20,"column":0,"depth":2}},"children":["spfwom01chbihki1twghclf","bsv930j2j6qlih60c7eu7wh","ohf85tu5nw2b8ewx6cetsmp","u3lhhpriar8wgcjw8svapha","tvdcga33h6hi7fxd9cwqd66","wvtpake5hh5uu6swigzu5dk"],"parent":null,"data":{},"body":"\nWelcome to the homepage! I use Dendron to store and organize notes, ideas, and experiments Iâ€™m working on. Here are the main sections youâ€™ll find on this site:\n\n1. **Learning Notes** â€” Practical notes on programming, recent technologies, and productivity tips.\n2. **Personal Projects** â€” Summaries of projects, experiments, and outcomes Iâ€™m working on or have completed.\n3. **Writings & Opinions** â€” Casual articles and reflections about technology, daily life, and other interesting topics.\n\nIâ€™m constantly experimenting and learning. I hope the content here helps you as a reference, a starting point for discussion, or just light reading.\n\n> Why Dendron?\n>\nDendron helps keep notes organized. Its \"seed\" and \"vault\" concepts make it easy to structure content and find what you need.\n\n## Find More\n\nIf you want to learn more or connect, check these links:\n\n- [Homepage (Dendron)](https://zeihanaulia.github.io/sotoy/)\n- [My GitHub](https://github.com/zeihanaulia)\n- [My Twitter / X](https://x.com/zeihanaulia)\n\nThanks for stopping by. If you have feedback or want to chat, feel free to reach out.\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"dendronVersion":"0.83.0","vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"seeds":{"dendron.templates":{}},"enableFullHierarchyNoteTitle":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":true,"siteRootDir":"docs","seo":{"title":"Sotoy","description":"Personal knowledge space about anything I learn. Notes, knowledge, and ideas from me.","author":"Zeihan Aulia","twitter":"zeihanaulia","image":{"url":"https://pbs.twimg.com/profile_images/502375255256485888/1UYtt7PT_400x400.jpeg","alt":"Software Engineer, "}},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"lookup","assetsPrefix":"/sotoy","siteUrl":"https://zeihanaulia.github.io","duplicateNoteBehavior":{"action":"useVault","payload":["vault-private","vault","dendron.templates"]},"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}